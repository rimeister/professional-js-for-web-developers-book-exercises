<!DOCTYPE html>
<html>
<head>
	<title>Chapter 6: Object Oriented Programming</title>
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link href="../lib/prism.css" rel="stylesheet" />
	<link rel="stylesheet" href="../lib/styles.css">
	<meta charset="utf-8">

	<script src="../lib/prism.js"></script>
</head>
<body>

<div class="container">

	<div class="row">

		<div class="col-sm-8">
			<h1>Chapter 6: Object Oriented Programming</h1>
				<div>
					<h2>Understanding Objects</h2>
					<p>ECMA-262 defines an object as an "unordered collection of properties, each of which contains a primitive value, object or function" (p. 173). Each "property" in this case is identified by a "name that is mapped to a value." Objects are based on reference types (native types, or developer-defined). A "reference type", as far as I can tell, is the same as a "class," the author just doesn't want to use the word class, because ECMAScript (prior to ES6) doesn't have proper classes: "Although reference types are similar to classes, the two concepts are not equivelant. To avoid confusion, term class is not used in the rest of this book" (p. 104).</p>
					<p>As the instructor in the Lynda programming Fundamentals class discussed, a <em>class</em> is a "blueprint" for an object. An object is the thing created from the blueprint. "Reference type" refers to what type of object it is (what blueprint it was created from), or, what class of object it is.</p>
					<p>Below is an example of an object I made up, though I guess it would only be an instance of the "Object" class, since I haven't defined a custom class/reference type.</p>
					<br>
					<pre>
					<code class="language-js">
						// Created with Object Literal notation 
						var myObject = { 
							prop1: "Boss", 
							prop2: "Totes", 
							meth1: function() { 
								alert(this.prop1); 
							}, 
							meth2: function(arg1){ 
								alert("The number of characters in this variable is " + arg1.length); 
							} 
						} 
						
						// Create a new instance of object 
						var myObject2 = new Object(); 
						
						myObject2.prop1 = "Boat"; 
						myObject2.prop2 = "Toss"; 
						myObject2.meth1 = function() { 
							alert(this.prop1); 
						}; 
						myObject2.meth2 = function(arg1){ 
							alert("The number of characters in this variable is " + arg1.length); 
						}; 
						
					</code>
					</pre><br><br>
					<script type="text/javascript">
						var myObject = {
							prop1: "Boss",
							prop2: "Totes",
							meth1: function() {
								alert(this.prop1);
							},
							meth2: function(arg1){
								alert("The number of characters in this variable is " + arg1.length);
							}
						}

						var myObject2 = new Object();

						myObject2.prop1 = "Boat";
						myObject2.prop2 = "Toss";
						myObject2.meth1 = function() {
							alert(this.prop1);
						};
						myObject2.meth2 = function(arg1){
							alert("The number of characters in this variable is " + arg1.length);
						};
					</script>
					<p><a href="#" onClick="event.preventDefault();alert(myObject.prop1);">myObject: Alert prop1</a> // Boss<br>
					<a href="#" onClick="event.preventDefault();alert(myObject.prop2);">myObject: Alert prop2</a> // Totes<br>
					<a href="#" onClick="event.preventDefault();myObject.meth1();">myObject: Run meth1(), no args.</a> // Alerts prop1<br>
					<a href="#" onClick="event.preventDefault();myObject.meth2('buds');">myObject: Run meth2('buds').</a> // Alerts length of arg passed in.</p>
					<br>
					<p><a href="#" onClick="event.preventDefault();alert(myObject2.prop1);">myObject2: Alert prop1</a> // Boat<br>
					<a href="#" onClick="event.preventDefault();alert(myObject2.prop2);">myObject2: Alert prop2</a> // Toss<br>
					<a href="#" onClick="event.preventDefault();myObject2.meth1();">myObject2: Run meth1(), no args.</a> // Alerts prop1<br>
					<a href="#" onClick="event.preventDefault();myObject2.meth2('dudes');">myObject2: Run meth2('dudes').</a> // Alerts length of arg passed in.</p>
					<br>

				</div>
				<br>
				<div>
					<h2>Types of Properties</h2>
					<p>There are two types of properties: <em>data properties</em> and <em>accessor</em> properties.</p>
					<h3>Data Properties</h3>
					<p>Data Properties have a single location for the data value. This location gets updated when the value changes. <strong>A data property has four attributes</strong> describing it's behaviour: [[Configurable]], [[Enumerable]], [[Writable]], and [[Value]]:</p>
					<ul>
						<li><strong>[[Configurable]]</strong>: Indicates if the property can be deleted, have its properties changed, or can be changed into an accessor property. By default, this is true for all properties defined directly on an object (as in the last example).</li>
						<li><strong>[[Enumerable]]</strong>: Indicates if the property will be returned in a for-in loop. By default, this is true.</li>
						<li><strong>[Writable]]</strong>: Indicates if a property's value can be change. True, by default.</li>
						<li><strong>[[Value]]</strong>: Contains the actual data value for the property.</li>
					</ul>
					<p>When a property is explicitly added to an object as in the previous examples, [[Configurable]], [[Enumerable]], and [[Writable]] are all set to true, while the [[Value]] is set to the assigned value."</p>
					<p>Default property attributes are changed using the ES5 <em>Object.defineProperty()</em> method. This method accepts three arguments: the property to be added or modified, the name of the property, and the descriptor object.</p>
					<h3>Accessor Properties</h3>
					<p>As mentioned above, there are two types of properties that an object has. The first type, discussed above, are <em>data properties</em>. The second type are called <em>Accessor Properties</em>. Accessor Properties do not contain data. Instead, they contain a <em>getter function</em> and/or a <em>setter function</em>. "When an accessor property is read from, the getter function is called, and it's the function's responsibility to return a valid value; when an accessor property is written to, a function is called with the new value, and that function must decide how to react to the data" (p. 177). "It's not possible to define an accessor property explicitly; you must use <em>Object.defineProperty();</em>" (p. 177). The underscore before the property name is a common notation that indicates that the property is not meant to be accessed outside of the object's methods.</p>
					<p>12/20/17 &ndash; I've been trying to understand "accessor properties", and what they're used for. I found a good article, and I've read most of it: <a href="https://javascriptplayground.com/blog/2013/12/es5-getters-setters/">https://javascriptplayground.com/blog/2013/12/es5-getters-setters/</a>. I think I'm getting a handle on accessor properties now (i.e., properties with <em>getter</em> and <em>setter</em> functions). Basically, when the property's value is calculated using a function, instead of being a simple piece of static data. Additionally, when a value for an accessor property is set using the <em>set()</em> attribute, it can update the value of other properties. For instance, the article gives the example of having an accessor property called <em>fullName</em>, which is a combination of the person's first name and last name. "For the most part, in JavaScript, what you see is what you get. A value’s a value; there are no tricks. Sometimes however, you want a value that’s based on some other values: someone’s full name, for example, is a concatenation of their first and last names." When you <em>get()</em> the full name, it returns the first name plus the last name. When you <em>set()</em> the full name, it splits it into the first name and last name, and updates the firstName and lastName properties.</p>
					<p>The author of the article also cautions against overuse: "Remember: just because a feature exists, it doesn’t need to be used all the time. Getters and Setters have their use cases, but don’t go over the top, or you’ll most likely end up with a design that’s confusing for those interacting with your objects."</p>
					<br>
					<p>Accessor properties have four attributes:</p>
					<ul>
						<li><strong>[[Configurable]]</strong>: Indicates if the property can be deleted, have its properties changed, or can be changed into an accessor property. By default, this is true for all properties defined directly on an object (as in the last example).</li>
						<li><strong>[[Enumerable]]</strong>: Indicates if the property will be returned in a for-in loop. By default, this is true.</li>
						<li><strong>[[Get]]</strong>: The function to call when the property is read from.</li>
						<li><strong>[[Set]]</strong>: The function to call when the property is written to.</li>
					</ul><br>
					<pre>
					<code class="language-js">
						// data property example
						var d = Object.getOwnPropertyDescriptor(myObject,"prop1");
						
						function updateObjectProps() {
							
							Object.defineProperty(myObject, "prop1", {
								writable: false,
								value: "Blue"
							});
						
							d = Object.getOwnPropertyDescriptor(myObject,"prop1");
						
							alert("The value of prop1 is now: " + myObject.prop1 + ". Is it writeable now? " + d.writable);

						}
						
						// accessor property example
						var book = { // Create new Object called "book"
							_year: 2004,
							edition: 1
						}
						
						Object.defineProperty(book, "year", {
							get: function() {
								return this._year;
							},
							set: function(newValue) {
								if (newValue > 2004) {
									this._year = newValue;
									this.edition += newValue -2004;
								}
							}
						});

						function updateBookEdition() {
							book.year = 2006;
							alert("Updated the year the book was publish. The year of the book is now: " + book.year + ". The edition of the book is now " + book.edition);
						}
					</code>
					</pre><br><br>
					<script type="text/javascript">

						// data property example
						var d = Object.getOwnPropertyDescriptor(myObject,"prop1");

						function updateObjectProps() {
							
							Object.defineProperty(myObject, "prop1", {
								writable: false,
								value: "Blue"
							});

							d = Object.getOwnPropertyDescriptor(myObject,"prop1");

							alert("The value of prop1 is now: " + myObject.prop1 + ". Is it writeable now? " + d.writable);

						}

						// accessor property example
						var book = { // Create new Object called "book"
							_year: 2004,
							edition: 1
						}

						Object.defineProperty(book, "year", {
							get: function() {
								return this._year;
							},
							set: function(newValue) {
								if (newValue > 2004) {
									this._year = newValue;
									this.edition += newValue -2004;
								}
							}
						});

						function updateBookEdition() {
							book.year = 2006;
							alert("Updated the year the book was publish. The year of the book is now: " + book.year + ". The edition of the book is now " + book.edition);
						}

					</script>
					<h4>Data Properties example:</h4>
					<a href="#" onClick="event.preventDefault();alert('The value of prop1 is currently: ' + myObject.prop1 + '. Is it writeable now? ' + d.writable);">Alert prop1 of myObject before Object.defineProperty();</a> <br>
					<a href="#" onClick="event.preventDefault();updateObjectProps();">Alert prop1 of myObject after Object.defineProperty();</a> <br><br>
					<h4>Accessor Properties Example:</h4>
					<a href="#" onClick="event.preventDefault();alert('The year of the book is currently: ' + book.year + '. The edition of the book is ' + book.edition);">Alert the current year and edition of the book</a>.<br>
					<a href="#" onClick="event.preventDefault();updateBookEdition();">Update year, alert the year and edition of the book now</a>.<br></a> <br>
					<p><strong>Quick note: I'm skipping the sub-headings "Defining Multiple Properties" and "Reading Property Attributes" for now.</strong></p>
				</div>
			<br>
			<div>
				<h2>Object Creation</h2>
				<p>This section describes the different patterns used to create objects.</p>
				<h3>The Factory Pattern</h3>
				<p>Consists of a function that returns an object.</p>
				<br>
				<pre>
				<code class="language-js">
					function createPerson(name, age, job){ 
				        	// Create new object
				            var o = new Object(); 
				        	// Define its properties
				            o.name = name; 
				            o.age = age; 
				            o.job = job; 
				            // Give it a method
				            o.sayName = function(){ 
				                alert(this.name); 
				            };     
				        	// Give it a method
				            return o; 
				        }
				         
				        var person1 = createPerson("Nicholas", 29, "Software  Engineer"); 
				        var person2 = createPerson("Greg", 27, "Doctor"); 
				         
				        person1.sayName();   //"Nicholas" 
				        person2.sayName();   //"Greg"			 		
				</code>
				</pre><br><br>
				<h3>The Constructor Pattern</h3>
				<p>Constructors create specific types of objects. Instances are create using the <em>new</em> operator. Note: there is no object being explicitly created in the function, and properties and methods are assigned directly onto the <em>this</em> object. There is no <em>return</em> statement. Constructor functions, by convention, use an uppercase letter for the first letter of the function name.</p>
				<br>
				<pre>
				<code class="language-js">
			        function Person(name, age, job){
			            this.name = name;
			            this.age = age;
			            this.job = job;
			            this.sayName = function(){
			                alert(this.name);
			            };    
			        }
			        
			        var person1 = new Person("Nicholas", 29, "Software Engineer");
			        var person2 = new Person("Greg", 27, "Doctor");
			        
			        person1.sayName();   //"Nicholas"
			        person2.sayName();   //"Greg"
			        
			        alert(person1 instanceof Object);  //true
			        alert(person1 instanceof Person);  //true
			        alert(person2 instanceof Object);  //true
			        alert(person2 instanceof Person);  //true
			        
			        alert(person1.constructor == Person);  //true
			        alert(person2.constructor == Person);  //true
			        
			        alert(person1.sayName == person2.sayName);  //false     
				</code>
				</pre><br><br>
				<h3>The Prototype Pattern</h3>
				<p>*description here*</p>
				<br>
				<pre>
				<code class="language-js">
			        // example here  
				</code>
				</pre><br><br>
				<script type="text/javascript">
					// JS here
				</script>
				<a href="#" onClick="event.preventDefault();">Link text</a> <br>
			</div>
			<br>
			<div>
				<h2>Next section</h2>
				<p>content goes here</p>
				<br>
				<code>
					&lt;script type="text/javascript"&gt;<br><br>
					&lt;/script&gt;<br>
				</code><br><br>
				<script type="text/javascript">
					// JS here
				</script>
				<a href="#" onClick="event.preventDefault();">Link text</a> <br>
			</div>
			<br>
			<br>
		</div>
	</div>

</body>
</html>