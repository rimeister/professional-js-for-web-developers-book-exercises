<!DOCTYPE html>
<html>
<head>
	<title>Chapter 4: Variables, Scope, and Memory</title>
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="../styles.css">
</head>
<body>

<div class="container">

	<div class="row">

		<div class="col-sm-8">
			<h1>Chapter 4: Variables, Scope, and Memory</h1>
			<div>
				<h2>Primitive and Reference Values</h2>				
				<p>As the title suggests, there are two types of values a variable can hold: primitive values and reference values.</p>

				<p>Primitive values are "atomic" pieces of data, like numbers and strings. When a primitive value is assigned to a variable, a copy of that value is assigned to the variable.</p>

				<p>A reference value points to an object (it references it), so no values are copied/duplicated when an object is assigned to a new variable. If a reference value is copied into a new variable, and then one of the properties of the new variable are modified, any other variables which reference this object will also reflect this change.</p>

			</div>
			<div>
				<h2>Argument Passing</h2>
				<p>Undefined data types are variables which have been declared, but not initialized.
				</p>
				<p>In this example, <em>var foo;</em> has been declared, but is uninitialized.</p>
				<h4>Code</h4>
				<code>
					&lt;script type="text/javascript"&gt;<br>
					function setName(obj) {<br>
					    obj.name = "Nicholas";<br>
					    obj = new Object;<br>
					    obj.name = "Greg";<br>
					}<br>

					var person = new Object();<br>
					setName(person);<br>
					alert(person.name);<br>
					&lt;/script&gt;<br>
				</code>

				<h4>Working Example:</h4>
				<script type="text/javascript">
					function setName(obj) {
					    obj.name = "Nicholas";
					    obj = new Object;
					    obj.name = "Greg";
					}

					var person = new Object();
					setName(person);
				</script>

				<a href="#" onClick="event.preventDefault();alert(person.name);">Click here to see what the value of <em>person.name</em> is.</a> It is, indeed, "Nicholas" and not "Greg".
			</div>
			<br>

			<div>
				<h2>Determining Type</h2>
				<p>The <em>typeof</em> works well with primitive values, but doesn't work well with reference types, since it will only tell you it's an object. For reference types, you want to use <em>instanceof</em> operator, which can tell you which type of object it is. Note, any reference type will always be an instance of Object.</p>
				<h4>Code</h4>
				<code>
					&lt;script type="text/javascript"&gt;<br>
					

					var person = new Object();<br>
					var arr = new Array();<br>
					
					alert(person instanceof Object);
					alert(arr instanceof Array);

					&lt;/script&gt;<br>
				</code>

				<h4>Working Example:</h4>
				<script type="text/javascript">

					var person = new Object();
					var arr = new Array();
					
				</script>

				<a href="#" onClick="event.preventDefault();alert(person instanceof Object);">Click here to see if <em>person</em> is an instance of Object.</a><br>

				<a href="#" onClick="event.preventDefault();alert(person instanceof Object);">Click here to see if <em>arr</em> is an instance of Array.</a>

			</div>
			<br>

			<div>
				<h2>Execution Context and Scope</h2>
				<p><em>Context</em> refers to the code block in which something happens. The <em>scope chain</em> refers to the hierarchy of variables that a particular context has access to.</p>
				<p>The <em>global</em> scope, also referred to as the <em>window</em>, is the outermost context, and is available to any other execution context. <del>An execution context could be a function, a for loop, or any block of code that terminates.</del> In javascript, there are only two primary types of execution contexts: global and function. So, a code block such as as <em>if</em> statement or a <em>for</em> loop does not have its own scope, and variables declared within it will be added to the global context. Below, I have created variables in three execution contexts:</p>
				<h4>Code</h4>
				<code>
					&lt;script type="text/javascript"&gt;<br>
					
					<br>
					var levelOne = 1;<br>
					<br>
					function secondLevel() {<br>
					<br>
					&nbsp;&nbsp;&nbsp;var levelTwo = 2;<br>
					<br>
					&nbsp;&nbsp;&nbsp;function thirdLevel(){<br>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var levelThree = 3;<br>
					&nbsp;&nbsp;&nbsp;}<br>
					<br>
					}<br>
					<br>
					&lt;/script&gt;<br>
				</code>
				<br><br>
				<p>By clicking the links below, you can see that:</p>
				<ol>
					<li>The global context has access to the variable declared within it (var <em>levelOne</em>).</li>
					<li>The function <em>secondLevel()</em> has access to the levelOne variable (in the global context), and the <em>levelTwo</em> variable declared within the secondLevel() function.</li>
					<li>The <em>thirdLevel()</em> function, which is nested in the levelTwo() function, has access to the levelOne var, the levelTwo var, and the levelThree var declared inside thirdLevel().</li>
				</ol><br>

				<h4>Working Example:</h4>

				<a href="#" onClick="event.preventDefault();firstLevel();">1. Click here to run the <em>firstLevel()</em> function.</a><br>

				<a href="#" onClick="event.preventDefault();secondLevel(event);">2. Click here to run the <em>secondLevel()</em> function.</a><br>

				<a href="#" id="level-three-btn">3. Click here to run the <em>thirdLevel()</em> function.</a>

				<script type="text/javascript">


					var levelOne = 1;

					// I run the secondLevel function here in order to add an eventlistener to the third button. I had to add the event listener inside the secondLevel function ir order to have access to the levelThree function contained within the levelTwo function. But, the level two function needs to run in order to bind that click event to the third button. So, that's why I run it here. Maybe there is a better way to do this, and I will learn it soon.
					secondLevel();

					function firstLevel() {
						alert(levelOne);
						if (typeof levelTwo !== "undefined") {	
							alert(levelTwo);
						} else {
							alert("\"levelTwo\" is undefined")
						}

						if (typeof levelThree !== "undefined") {
							alert(levelThree);
						} else {	
							alert("\"levelThree\" is undefined");
						}

					}

					function secondLevel(event) {

						var levelTwo = 2;
						// Only run this if the function is called from a click even (i.e., the second button is clicked). I needed to put this here in order to prevent the alerts from firing when I run the function above in the global context.
						if (event && event.type === 'click') {

							alert(levelOne);

							if (typeof levelTwo !== "undefined") {	
								alert(levelTwo);
							} else {
								alert("\"levelTwo\" is undefined")
							}

							if (typeof levelThree !== "undefined") {
								alert(levelThree);
							} else {	
								alert("\"levelThree\" is undefined");
							}

						}

						function thirdLevel(){

							var levelThree = 3;

							alert(levelOne);

							if (typeof levelTwo !== "undefined") {	
								alert(levelTwo);
							} else {
								alert("\"levelTwo\" is undefined")
							}

							if (typeof levelThree !== "undefined") {
								alert(levelThree);
							} else {	
								alert("\"levelThree\" is undefined");
							}

						}

						document.getElementById('level-three-btn').addEventListener('click', function(event){
							event.preventDefault();
						    thirdLevel();
						});

					}


				</script>

			</div>
			<br>
			<div>
				<h2>Scope Chain Augmentation</h2>
				<p>This section discusses two methods of <em>augmenting</em> the scope chain: <em>try-catch</em> and <em>with</em>. To be honest, reading the explanation isn't enhhancing my understanding of what Scope Chain Augmentation is. I will have to also Google this one.</p>
				<h4>Code</h4>
				<code>
					&lt;script type="text/javascript"&gt;<br>
					
					&lt;/script&gt;<br>
				</code>

				<h4>Working Example:</h4>
				<script type="text/javascript">
					
				</script>

				<a href="#" onClick="event.preventDefault();alert(person instanceof Object);">Click here to see if <em>person</em> is an instance of Object.</a><br>

				<a href="#" onClick="event.preventDefault();alert(person instanceof Object);">Click here to see if <em>arr</em> is an instance of Array.</a>

			</div>
			<br>
		</div>
	</div>

</body>
</html>