<!DOCTYPE html>
<html>
<head>
	<title>Chapter 5: Reference Types</title>
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link href="../lib/prism.css" rel="stylesheet" />
	<link rel="stylesheet" href="../lib/styles.css">
	<meta charset="utf-8">

	<script src="../lib/prism.js"></script>
</head>
<body>

<div class="container">

	<div class="row">

		<div class="col-sm-8">
			<h1>Chapter 5: Reference Types</h1>
			<div>
				<h2>What is a reference type?</h2>				
				<p>In Javascript, an object is an instance of a particular reference type. For example, it could be an instance of the <em>Array</em> type, the <em>Function</em> type, the <em>RexExp</em> type, the <em>Date</em> type, or the <em>Math</em> type. Examples of "Primitive Wrapper" types include the <em>Boolean</em> type, the <em>String</em> type, and the the <em>Number</em> type. Different reference types &ndash; which I supposed could also be referred to as different <em>class types</em>, if you consider reference types to be classes &ndash; have different properties and methods available to them. For instance, the Math object has methods on it for manipulating numbers, such as <em>Math.round();</em>, which will return a rounded number.</p>

				<p>All objects are considered instances of the <em>Object</em> reference type, so running (instanceName instanceof Object) will evaluate to true.</p><br>


				<h4>Code</h4>
				<pre>
<code class="language-js">

var instanceName = new Array();
alert(instanceName instanceof Array); // True 
alert(instanceName instanceof Function); // False 
alert(instanceName instanceof Object); // True 

</code></pre><br><br>

				<h4>Working Example:</h4>
				<script type="text/javascript">
					var instanceName = new Array();
				</script>

				<a href="#" onClick="event.preventDefault();alert(instanceName instanceof Array);">Click here to see what if <em>instanceName</em> is an instance of the <em>Array</em> reference type.</a><br>
				<a href="#" onClick="event.preventDefault();alert(instanceName instanceof Function);">Click here to see what if <em>instanceName</em> is an instance of the <em>Function</em> reference type.</a><br>
				<a href="#" onClick="event.preventDefault();alert(instanceName instanceof Object)">Click here to see what if <em>instanceName</em> is an instance of the <em>Object</em> reference type.</a>
			</div>
			<br>
			<div>
				<h2>The Object Type</h2>
				<p>The <em>Object</em> type doesn't have much functionality, but it's useful for transmitting and storing data in an application. They can be instantiated using <em>var varName = new Object();</em>, or by declaring an object literal, like this: <em>var varName = {name: "Riley", age: 30};</em></p><br>
				<h4>Code</h4>
				<pre>
<code class="language-js">

var object1 = new Object(); 
object1.name = "obj1"; 

var object2 = { 
	name: "obj2" 
}

alert(object1.name);
alert(object2.name);

</code></pre><br><br>

				<h4>Working Example:</h4>
				<script type="text/javascript">
					var object1 = new Object(); 
					object1.name = "obj1"; 
					var object2 = { 
					 name: "obj2"
					}						
				</script>
				<a href="#" onClick="event.preventDefault();alert(object1.name);"> Click here to see what the name property value of <em>object1</em> is.</a><br>
				<a href="#" onClick="event.preventDefault();alert(object2.name);"> Click here to see what the name property value of <em>object2</em> is.</a>
			</div><br>
			<div>
				<h2>The Array Type</h2>
				<p>Probably the second-most used reference type after Object. Unlike other languages, it can contain mixed data types in JS. Length property can be accessed by using <em>.length</em>, but can also be set this way, it just adds more undefined items to the array. You can also shorten it by setting a length shorter than the array length.</p>
				<p>The Array type has methods for adding to and removing from the arry, such as .push(), .pop(), .shift(), slice(), and methods for sorting the array, like .sort() and .reverse(). The book says the most powerful array method is .splice(), which can add items to the middle of the array. Like the String type, it has the .indexOf() and .lastIndexOf methods.</p>
				<p>Perhaps, as Simon from the Lynda course said, one doesn't need to memorize these methods, but just have a good reference that lists them, to refer to when needed. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">This page from the Mozilla Javascript reference has all the methods available for an array object</a>. There are, indeed, lots of them.</p>
				<p>The book says that ES5 includes five iterative methods for arrays: every(), filter(), forEach(), map(), and some().</p>
				<br>
				<h4>Code</h4>
				<pre>
<code class="language-js">

var fruits = ['Apple', 'Banana'];
var fruits = ['Banana','Apple']; // Create array using object literal notation
console.log(fruits);

fruits.push('Orange'); // Push an orange onto the end of the array
console.log(fruits);

fruits.length = 4; // Adds an undefined item to the end of the array
console.log(fruits);

fruits[3] = "Pear"; // Put "Pear" in index position 3
console.log(fruits);

fruits.sort(); // Sorts array according to unicode index of first letter of the string
console.log(fruits);

console.log("The item \"Orange\" is at index position " + fruits.indexOf("Orange"));

var itemsWithP = fruits.filter(function(item,index,array){

return ( item.toString().toLowerCase().indexOf("p") > -1 ); // Filter items have have a letter P in them
});

console.log(itemsWithP);

var areAllItemsLengthGreaterThanFour = fruits.every(function(item,index,array){
return (item.length > 4);
});

if (areAllItemsLengthGreaterThanFour) {
	console.log("All items have more than four characters");
} else {
	console.log("Some items have less than four characters");
}

var areAllItemsLengthGreaterThanThree = fruits.every(function(item,index,array){
	return (item.length > 3);
});

if (areAllItemsLengthGreaterThanThree) {
	console.log("All items have more than three characters");
} else {
	console.log("Some items have less than three characters");
}

// Reduction methods for iterating some values in an array and building a new value from them (such as adding or subtracting them). Also has reduceRight(), which starts at the other end.
var values = [2,4,5,1,2,4];
var sum = values.reduce(function(prev,cur,index,array){
	return prev + cur;
});
console.log("The sum of these values is " + sum);

</code></pre><br><br>

				<h4>Working Example:</h4>
				<script type="text/javascript">
					// Example code here
					var fruits = ['Banana','Apple']; // Create array using object literal notation
					console.log(fruits);

					fruits.push('Orange'); // Push an orange onto the end of the array
					console.log(fruits);

					fruits.length = 4; // Adds an undefined item to the end of the array
					console.log(fruits);

					fruits[3] = "Pear"; // Put "Pear" in index position 3
					console.log(fruits);

					fruits.sort(); // Sorts array according to unicode index of first letter of the string
					console.log(fruits);

					console.log("The item \"Orange\" is at index position " + fruits.indexOf("Orange"));

					var itemsWithP = fruits.filter(function(item,index,array){
						
						return ( item.toString().toLowerCase().indexOf("p") > -1 ); // Filter items have have a letter P in them
					});

					console.log(itemsWithP);

					var areAllItemsLengthGreaterThanFour = fruits.every(function(item,index,array){
						return (item.length > 4);
					});

					if (areAllItemsLengthGreaterThanFour) {
						console.log("All items have more than four characters");
					} else {
						console.log("Some items have less than four characters");
					}

					var areAllItemsLengthGreaterThanThree = fruits.every(function(item,index,array){
						return (item.length > 3);
					});

					if (areAllItemsLengthGreaterThanThree) {
						console.log("All items have more than three characters");
					} else {
						console.log("Some items have less than three characters");
					}

					// Reduction methods for iterating some values in an array and building a new value from them (such as adding or subtracting them). Also has reduceRight(), which starts at the other end.
					var values = [2,4,5,1,2,4];
					var sum = values.reduce(function(prev,cur,index,array){
						return prev + cur;
					});
					console.log("The sum of these values is " + sum);


				</script>
				<p>Look in the console to see the example working.</p>
				</div>
				<br>
				<div>
					<h2>The Date Object</h2>
					<p>Instantiating a date object creates a reference with the current date and time. You can also create a Date object and pass in a specific date, using Date.parse(), or using the numeric format.</p>
					<h4>Code</h4>
					<pre>
<code class="language-js">

var now = new Date();
var then = new Date(Date.parse("May 24, 2017"));
var y2k = new Date(2000,0);

// Log the dates
console.log(now); // Date 2017-12-15T16:42:33.011Z
console.log(then); // Date 2017-05-24T04:00:00.000Z
console.log(y2k); // Date 2000-01-01T05:00:00.000Z

</code></pre><br><br>

					<h4>Working Example:</h4>
					<script type="text/javascript">

						// Function I found online for converting milliseconds to hours, minutes, etc.
						function msToTYears(duration) {
						    var years = duration/31536000000;
						    years = Math.round(years * 100) / 100;
						    return years;
						}

						var now = new Date();
						var then = new Date(Date.parse("May 24, 2017"));
						var y2k = new Date(2000,0);

						//var timeSinceY2k = now - y2k;

						// Log the dates
						console.log(now);
						console.log(then);
						console.log(y2k);
						var timeSinceY2k = msToTYears(now - y2k);
						console.log("It has been " + timeSinceY2k + " years since Y2K.");

					</script>
					<p>Look in the console to see the example working.</p>
				</div>
				<br>
				<div>
					<h2>The RegExp Object</h2>
					<p>A RegExp object contains a regular expression. The primary method you use with it (which is apparently innherited through the prototype chain) is <em>exec()</em>, but you can also use <em>test()</em>.</p>
					<h4>Code</h4>
					<pre>
<code class="language-js">

var phrase = "Test this expression";
var phrase2 = "Also test this spare phrase, but with exec()";
var pattern1 = /press/;
var pattern2 = new RegExp(".pa");

console.log("Is pattern1 (\"" + pattern1.source + "\") in the phrase \"" + phrase + "\"? " + pattern1.test(phrase));
console.log("Is pattern2 (\"" + pattern2.source + "\") in the phrase \"" + phrase + "\"? " + pattern2.test(phrase));

var matches = pattern2.exec(phrase2);

console.log(matches[0]);

</code></pre><br><br>

					<h4>Working Example:</h4>
					<script type="text/javascript">

						var phrase = "Test this expression";
						var phrase2 = "Also test this spare phrase, but with exec()";
						var pattern1 = /press/;
						var pattern2 = new RegExp(".pa");

						console.log("Is pattern1 (\"" + pattern1.source + "\") in the phrase \"" + phrase + "\"? " + pattern1.test(phrase));
						console.log("Is pattern2 (\"" + pattern2.source + "\") in the phrase \"" + phrase + "\"? " + pattern2.test(phrase));

						var matches = pattern2.exec(phrase2);

						console.log(matches[0]);

					</script>
					<p>Look in the console to see the example working.</p>
				</div>
				<br>
				<div>
					<h2>The Function Type</h2>
					<p>In Javascript, functions are actually objects. "Because function names are nothing more than variables, functions can be used any place any other variable can be used." Becuase of this, you can pass a function into another function as an argument, or return a function from another function. Functions have an <em>arguments</em> object, and a <em>this</em> object.</p>

					<p>The <em>arguments</em> object has a property named <em>callee</em>, which points to the function that owns the arguments.</p>

					<p>The book says functions also have two more methods, named <em>call()</em> and <em>apply()</em>, but I'm not totally sure how to use them. Apparently they get used in conjunction with <em>this</em>.</p>

					<h4>Code</h4>
					<pre>
<code class="language-js">

function sum(a,b){
	// Logs the name of this function
	console.log("The funciton is named " + arguments.callee); // "The funciton is named function sum(a,b){ ... etc."
	return a + b;
}

var addedTogether = sum(1,2);

</code></pre><br><br>

					<h4>Working Example:</h4>
					<script type="text/javascript">

						function sum(a,b){
							// Logs the name of this function
							console.log("The funciton is named " + arguments.callee); // The funciton is named function sum(a,b){ ... etc.
							return a + b;
						}

						var addedTogether = sum(1,2);

					</script>
					<p>Look in the console to see the example working.</p>
				</div>
				<br>
				<div>
					<h2>Primitive Wrapper Types: String, Boolean, Number</h2>
					<p>"Primitive Wrapper" refers to the object that is created behind the scenes that allows you to use methods on primitive data types. Logically, you shouldn't be able to use methods on primitive data, since they shouldn't have them. But, you can because a wrapper instance is temporarily created.</p>
				</div>
				<pre>
<code class="language-js">

var s1 = "some text";
var s2 = s1.substring(2); // Using a method on a primitive

// Behind the scenes, this happens:
var s1 = new String("Some text"); 
var s2 = s1.substring(2); 
s1 = null; 

</code></pre><br>
				<br>
				<div>
					<h2>The Global Object</h2>
					<p>The Global object is a sort of catch-all for the methods and properties that don't have an object. It is not directly accessible (so, I guess you couldn't do like <em>var siteURL = global.location;</em>). These include: URI encoding methods (encodeURI(), encodeURIComponent(), decodeURI(), etc.), and the eval() method. Notice that these methods aren't used on an object, they are just called like so: <em>var encodedUrl = encodeURI(uri);</em>.</p>
					<p>According to this book, the <em>eval()</em> method is "perhaps the most powerful in the entire ECMAScript language" (p. 63). I can't figure out why it's powerful, or even useful, from reading this book.</p>
					<p>The Window object: "Though ECMA-262 doesn't indicate a way to access the Global object directly, web browsers implement it such that <em>window</em> is the Global object's delegate.</p>
					<br>
					<pre>
<code class="language-js">

eval("alert("hi")"); // evaluates as alert("hi"); 

// The window object 
var color = "red"; // Global variable called "color"
function sayColor(){ 
	alert(window.color); 
} 

window.sayColor(); // "red" 

</code></pre>
				</div>
				<br>
				<div>
					<h2>The Math Object</h2>
					<p>In Javascript, the Math object acts "as a common location for mathematical formulas and information. The computations available on the math object execute faster than if you were to write the computations in Javascript directly."</p>
					<p>There are a bunch of methods and properties, such as the value of Pi (<em>Math.PI();</em>, the square root of 2 (<em>Math.SQRT2</em>),  the square root of &frac12; (<em>Math.SQRT2</em>), rounding methods (<em>Math.ceil();</em>, <em>Math.round();</em>, and <em>Math.floor();</em>), the <em>random();</em> method, and the square root method (<em>Math.sqrt();</em>, among several others.</p>
					<p>In the example below, I will try the random() method. Clicking the link alerts a random method, converted to a whole number. Rationale: Math.random gives a value between 0 and 1, such as 0.215556. Multiplying it by ten gives it a value between 1 and 10 (e.g., 2.15556). Random() could also return a value that has 0 as the first number after the decminal, though (e.g., 0.06425488375893851), which when multiplied by 10, would be a number like 0.6425488375893851). Math.floor ALWAYS rounds the decimal value down -- in the instance of 0.642, it would be rounded down to 0. Since we want a number between 1 and 10 (not 0 and 9), we have to add 1 the resulting value. I'm not sure why we wouldn't just use Math.ceil(), and not add 1, but that's the way he does it.</p>
					<br>
					<pre>
<code class="language-js">

function randNumb() { 
// Returns a random number between 1 and 10. 
	alert( Math.floor( Math.random() * 10 ) ); 
} 

</code></pre>
					<script type="text/javascript">
						function randNumb() {
							// Returns a random number between 1 and 10.
							alert( Math.floor( Math.random() * 10 ) );
						}
					</script>
					<a href="#" onClick="event.preventDefault();randNumb();">Click here to get a random number between 1 and 10.</a> <br>
				</div>
			<br>
			<br>
		</div>
	</div>

</body>
</html>